# 射鱼游戏 - 技术与设计方案 (GDD)

## 1. 游戏概述 (Overview)
本项目旨在开发一款基于 Web 的竖版 HTML5 休闲射击游戏。玩家扮演一名位于水面（屏幕下方）的射手，使用弓箭射击水中（屏幕上方）游动的不同鱼类。

- **核心体验**：物理抛物线射击 + 蓄力手感。
- **平台**：移动端 Web (竖屏 9:16)，适配 PC 浏览器模拟。
- **技术栈**：Phaser 3 + TypeScript + Vite。

---

## 2. 核心玩法 (Core Gameplay)

### 2.1 操作机制 (Controls)
*   **瞄准 (Aiming)**：
    *   玩家点击或触摸屏幕任意位置，弓箭会自动旋转对准该触摸点。
    *   弓箭固定在屏幕底部中心 `(Screen_Width / 2, Screen_Height - Padding)`。
*   **蓄力 (Charging)**：
    *   **触发**：按下鼠标左键/手指按住屏幕。
    *   **反馈**：UI 显示蓄力条（Power Bar）或力度百分比（0% -> 100%）。
    *   **机制**：蓄力时间越长，`Power` 值越大（有上限）。
*   **射击 (Shooting)**：
    *   **触发**：松开鼠标/手指。
    *   **效果**：生成一支箭矢，根据当前的 **角度** 和 **蓄力值** 施加初始速度。
    *   **冷却**：当前箭矢消失前或极短间隔后可再次射击（初期设定为无冷却，爽快感优先）。

### 2.2 物理规则 (Physics)
*   **重力**：游戏世界具有向下的重力 `(Gravity Y: 300~500)`。
*   **弹道**：箭矢受重力影响，呈现抛物线运动。
*   **空气阻力/水阻力**：可选特性，箭矢入水后速度轻微衰减。

### 2.3 胜负规则 (Rules)
*   **得分**：击中鱼后获得对应分数。
*   **失败**：目前设计为无尽模式（Endless），或者设定时间限制/箭矢数量限制。

---

## 3. 游戏单位 (Game Entities)

### 3.1 玩家 (Player / Bow)
*   **位置**：固定底部。
*   **表现**：一张弓的图片，或是简单的几何图形组合。
*   **状态**：空闲 (Idle)、蓄力中 (Charging)、发射 (Fire)。

### 3.2 箭矢 (Arrow)
*   **特性**：
    *   拥有物理刚体 (Physics Body)。
    *   **旋转**：在飞行过程中，箭矢的头部始终朝向当前速度方向（实现逼真的抛物线视觉）。
    *   **销毁**：飞出屏幕边界或击中鱼后销毁。

### 3.3 鱼类 (Fishes)
鱼类从屏幕左侧或右侧随机高度生成，向对面游动。

| 类型 | 名称 | 分数 | 速度 | 体积 | 特性 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **Lv 1** | 小鱼 (Small Fish) | 10 | 快 | 小 | 直线运动，数量多 |
| **Lv 2** | 中鱼 (Medium Fish) | 30 | 中 | 中 | 偶尔上下浮动 (Sine Wave) |
| **Lv 3** | 大鱼 (Big Fish) | 100 | 慢 | 大 | 血量厚 (需 2 箭)，生成频率低 |

---

## 4. 美术风格 (Art Style)
*   **视角**：2D 侧视 (Side Scroller View) 或 俯视 (Top Down)，本项目采用 **侧视截面**（即屏幕下方是水底/水面，上方是深水，或者反过来，根据“主视角出于正下方”的要求，设定为：**下方是岸边/水面，上方是水域**）。
*   **色调**：清爽的蓝色调。
*   **素材**：
    *   背景：深蓝色渐变，带动态水波。
    *   鱼：色彩鲜艳，与背景形成对比。

---

## 5. 技术架构 (Technical Architecture)

### 5.1 目录结构
```text
src/
├── assets/          # 静态资源
├── objects/         # 游戏对象类
│   ├── Bow.ts       # 弓逻辑
│   ├── Arrow.ts     # 箭矢物理逻辑
│   └── Fish.ts      # 鱼的基类及AI
├── scenes/          # 场景管理
│   ├── Boot.ts      # 初始化配置
│   ├── Preloader.ts # 资源预加载
│   ├── Game.ts      # 主游戏循环
├── main.ts          # 入口
└── config.ts        # 全局配置
```

### 5.2 关键类设计
*   **`FishManager`**：负责管理鱼群的生成（Spawning）和对象池（Object Pooling），避免频繁创建销毁导致卡顿。
*   **`CollisionManager`**：在 `Game.ts` 的 `update` 中处理 `Arrow` 与 `Fish` 的重叠判定。

---

## 6. 开发计划 (Roadmap)

- [x] **Phase 1: 基础设施** - 初始化项目，配置 Phaser 环境。
- [x] **Phase 2: 核心射击** - 实现弓箭旋转、蓄力、抛物线物理。
- [ ] **Phase 3: 鱼群系统** - 实现鱼的生成、移动逻辑。
- [ ] **Phase 4: 交互与反馈** - 实现碰撞检测、计分UI、简单的粒子特效。
- [ ] **Phase 5: 抛光 (Polish)** - 替换正式美术素材，调整数值平衡。


